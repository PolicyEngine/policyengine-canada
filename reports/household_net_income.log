Traceback (most recent call last):
  File "/opt/hostedtoolcache/Python/3.9.16/x64/lib/python3.9/site-packages/jupyter_cache/executors/utils.py", line 51, in single_nb_execution
    executenb(
  File "/opt/hostedtoolcache/Python/3.9.16/x64/lib/python3.9/site-packages/nbclient/client.py", line 1204, in execute
    return NotebookClient(nb=nb, resources=resources, km=km, **kwargs).execute()
  File "/opt/hostedtoolcache/Python/3.9.16/x64/lib/python3.9/site-packages/nbclient/util.py", line 84, in wrapped
    return just_run(coro(*args, **kwargs))
  File "/opt/hostedtoolcache/Python/3.9.16/x64/lib/python3.9/site-packages/nbclient/util.py", line 62, in just_run
    return loop.run_until_complete(coro)
  File "/opt/hostedtoolcache/Python/3.9.16/x64/lib/python3.9/asyncio/base_events.py", line 647, in run_until_complete
    return future.result()
  File "/opt/hostedtoolcache/Python/3.9.16/x64/lib/python3.9/site-packages/nbclient/client.py", line 663, in async_execute
    await self.async_execute_cell(
  File "/opt/hostedtoolcache/Python/3.9.16/x64/lib/python3.9/site-packages/nbclient/client.py", line 965, in async_execute_cell
    await self._check_raise_for_error(cell, cell_index, exec_reply)
  File "/opt/hostedtoolcache/Python/3.9.16/x64/lib/python3.9/site-packages/nbclient/client.py", line 862, in _check_raise_for_error
    raise CellExecutionError.from_cell_and_msg(cell, exec_reply_content)
nbclient.exceptions.CellExecutionError: An error occurred while executing the following cell:
------------------
from policyengine_canada import Simulation

sim = Simulation(
    situation=dict(
        people=dict(
            person=dict(
                age=30,
                employment_income=20_000,
            )
        )
    )
)

sim.calculate("income_tax")
------------------

[0;31m---------------------------------------------------------------------------[0m
[0;31mVariableNotFoundError[0m                     Traceback (most recent call last)
Cell [0;32mIn[1], line 14[0m
[1;32m      1[0m [38;5;28;01mfrom[39;00m [38;5;21;01mpolicyengine_canada[39;00m [38;5;28;01mimport[39;00m Simulation
[1;32m      3[0m sim [38;5;241m=[39m Simulation(
[1;32m      4[0m     situation[38;5;241m=[39m[38;5;28mdict[39m(
[1;32m      5[0m         people[38;5;241m=[39m[38;5;28mdict[39m(
[0;32m   (...)[0m
[1;32m     11[0m     )
[1;32m     12[0m )
[0;32m---> 14[0m [43msim[49m[38;5;241;43m.[39;49m[43mcalculate[49m[43m([49m[38;5;124;43m"[39;49m[38;5;124;43mincome_tax[39;49m[38;5;124;43m"[39;49m[43m)[49m

File [0;32m/opt/hostedtoolcache/Python/3.9.16/x64/lib/python3.9/site-packages/policyengine_core/simulations/simulation.py:320[0m, in [0;36mSimulation.calculate[0;34m(self, variable_name, period, map_to, decode_enums)[0m
[1;32m    315[0m [38;5;28mself[39m[38;5;241m.[39mtracer[38;5;241m.[39mrecord_calculation_start(
[1;32m    316[0m     variable_name, period, [38;5;28mself[39m[38;5;241m.[39mbranch_name
[1;32m    317[0m )
[1;32m    319[0m [38;5;28;01mtry[39;00m:
[0;32m--> 320[0m     result [38;5;241m=[39m [38;5;28;43mself[39;49m[38;5;241;43m.[39;49m[43m_calculate[49m[43m([49m[43mvariable_name[49m[43m,[49m[43m [49m[43mperiod[49m[43m)[49m
[1;32m    321[0m     [38;5;28;01mif[39;00m [38;5;28misinstance[39m(result, EnumArray) [38;5;129;01mand[39;00m decode_enums:
[1;32m    322[0m         result [38;5;241m=[39m result[38;5;241m.[39mdecode_to_str()

File [0;32m/opt/hostedtoolcache/Python/3.9.16/x64/lib/python3.9/site-packages/policyengine_core/simulations/simulation.py:439[0m, in [0;36mSimulation._calculate[0;34m(self, variable_name, period)[0m
[1;32m    426[0m [38;5;28;01mdef[39;00m [38;5;21m_calculate[39m(
[1;32m    427[0m     [38;5;28mself[39m, variable_name: [38;5;28mstr[39m, period: Period [38;5;241m=[39m [38;5;28;01mNone[39;00m
[1;32m    428[0m ) [38;5;241m-[39m[38;5;241m>[39m ArrayLike:
[1;32m    429[0m     [38;5;124;03m"""[39;00m
[1;32m    430[0m [38;5;124;03m    Calculate the variable ``variable_name`` for the period ``period``, using the variable formula if it exists.[39;00m
[1;32m    431[0m 
[0;32m   (...)[0m
[1;32m    437[0m [38;5;124;03m        ArrayLike: The calculated variable.[39;00m
[1;32m    438[0m [38;5;124;03m    """[39;00m
[0;32m--> 439[0m     population [38;5;241m=[39m [38;5;28;43mself[39;49m[38;5;241;43m.[39;49m[43mget_variable_population[49m[43m([49m[43mvariable_name[49m[43m)[49m
[1;32m    440[0m     holder [38;5;241m=[39m population[38;5;241m.[39mget_holder(variable_name)
[1;32m    441[0m     variable [38;5;241m=[39m [38;5;28mself[39m[38;5;241m.[39mtax_benefit_system[38;5;241m.[39mget_variable(
[1;32m    442[0m         variable_name, check_existence[38;5;241m=[39m[38;5;28;01mTrue[39;00m
[1;32m    443[0m     )

File [0;32m/opt/hostedtoolcache/Python/3.9.16/x64/lib/python3.9/site-packages/policyengine_core/simulations/simulation.py:918[0m, in [0;36mSimulation.get_variable_population[0;34m(self, variable_name)[0m
[1;32m    917[0m [38;5;28;01mdef[39;00m [38;5;21mget_variable_population[39m([38;5;28mself[39m, variable_name: [38;5;28mstr[39m) [38;5;241m-[39m[38;5;241m>[39m Population:
[0;32m--> 918[0m     variable [38;5;241m=[39m [38;5;28;43mself[39;49m[38;5;241;43m.[39;49m[43mtax_benefit_system[49m[38;5;241;43m.[39;49m[43mget_variable[49m[43m([49m
[1;32m    919[0m [43m        [49m[43mvariable_name[49m[43m,[49m[43m [49m[43mcheck_existence[49m[38;5;241;43m=[39;49m[38;5;28;43;01mTrue[39;49;00m
[1;32m    920[0m [43m    [49m[43m)[49m
[1;32m    921[0m     [38;5;28;01mreturn[39;00m [38;5;28mself[39m[38;5;241m.[39mpopulations[variable[38;5;241m.[39mentity[38;5;241m.[39mkey]

File [0;32m/opt/hostedtoolcache/Python/3.9.16/x64/lib/python3.9/site-packages/policyengine_core/taxbenefitsystems/tax_benefit_system.py:440[0m, in [0;36mTaxBenefitSystem.get_variable[0;34m(self, variable_name, check_existence)[0m
[1;32m    438[0m found [38;5;241m=[39m variables[38;5;241m.[39mget(variable_name)
[1;32m    439[0m [38;5;28;01mif[39;00m [38;5;129;01mnot[39;00m found [38;5;129;01mand[39;00m check_existence:
[0;32m--> 440[0m     [38;5;28;01mraise[39;00m VariableNotFoundError(variable_name, [38;5;28mself[39m)
[1;32m    441[0m [38;5;28;01mreturn[39;00m found

[0;31mVariableNotFoundError[0m: You tried to calculate or to set a value for variable 'income_tax', but it was not found in the loaded tax and benefit system (policyengine-canada@0.13.0).
Are you sure you spelled 'income_tax' correctly?
If this code used to work and suddenly does not, this is most probably linked to an update of the tax and benefit system.
Look at its changelog to learn about renames and removals and update your code. If it is an official package,
it is probably available on <https://github.com/openfisca/policyengine-canada/blob/master/CHANGELOG.md>.
VariableNotFoundError: You tried to calculate or to set a value for variable 'income_tax', but it was not found in the loaded tax and benefit system (policyengine-canada@0.13.0).
Are you sure you spelled 'income_tax' correctly?
If this code used to work and suddenly does not, this is most probably linked to an update of the tax and benefit system.
Look at its changelog to learn about renames and removals and update your code. If it is an official package,
it is probably available on <https://github.com/openfisca/policyengine-canada/blob/master/CHANGELOG.md>.

