- name: Base amount for family of 3
  period: 2023
  input:
    people:
      parent:
        gst_credit_category: HEAD
      c1:
        gst_credit_category: SPOUSE
      c2:
        gst_credit_category: CHILD
    household:
      members: [parent, c1, c2]
  output:
    gst_credit_base: 306 + 306 + 161

- name: Number of dependent children
  period: 2023
  input:
    people:
      parent:
        is_dependent: false
        age: 55
      c1:
        is_dependent: true
        age: 16
      c2:
        is_dependent: true
        age: 17
    household:
      members: [parent, c1, c2]
      is_married: false
  output:
    gst_credit_dependent_children: 2
    gst_credit_base: 306 + 306 + 161

- name: Is considered a child for this credit
  period: 2023
  input:
    gst_credit_category: CHILD
    is_dependent: true
    age: 7
  output:
    is_child_for_gst_credit: true

- name: Isn't a child because not dependent
  period: 2023
  input:
    gst_credit_category: CHILD
    is_dependent: false
    age: 7
  output:
    is_child_for_gst_credit: false

- name: Is eldest child in single-parent household 
  period: 2023
  input:
    people:
      parent:
        age: 50
      c1:
        age: 17
      c2:
        age: 7
    household:
      members: [parent, c1, c2]
      is_married: false
  output:
    people: 
      c1:        
        is_eldest_child_in_single_household_for_gst_credit: true
      c2:        
        is_eldest_child_in_single_household_for_gst_credit: false

- name: Eldest child in single-parent household gets the spousal amount
  period: 2023
  input:
    people:
      parent:
        age: 50
      c1:
        age: 17
      c2:
        age: 7
    household:
      members: [parent, c1, c2]
      is_married: false
  output:
    people: 
      parent:
        gst_credit_person: 306
      c1:        
        gst_credit_person: 306
      c2: 
        gst_credit_person: 161
    gst_credit_base: 306 + 306 + 161


- name: Is a single parent household
  period: 2023
  input:
    is_married: false
    people:
      parent:
        gst_credit_category: HEAD
        age: 55
      c1:
        gst_credit_category: CHILD
        is_dependent: true
        age: 16
      c2:
        gst_credit_category: CHILD
        is_dependent: true
        age: 17
    household:
      members: [parent, c1, c2]
  output:
    gst_credit_single_parent_household: true


- name: Number of dependent children, being over the age limit excludes c2
  period: 2023
  input:
    people:
      parent:
        gst_credit_category: HEAD
        is_dependent: false
        age: 55
      c1:
        gst_credit_category: CHILD
        is_dependent: true
        age: 16
      c2:
        gst_credit_category: CHILD
        is_dependent: true
        age: 19
    household:
      members: [parent, c1, c2]
  output:
    gst_credit_dependent_children: 1
    gst_credit_base: 306 + 161 + 161

- name: Personal amounts for family of 3 
  period: 2023
  input:
    people:
      parent:
        gst_credit_category: HEAD
      c1:
        gst_credit_category: SPOUSE
      c2:
        gst_credit_category: CHILD
    household:
      members: [parent, c1, c2]
  output:
    gst_credit_person: [306, 306, 161]

- name: Singles boost. Single person with income 15,000. Should get a boost of (15,000 - 9919) * 0.02 = 101.62
  period: 2023
  input:
    gst_credit_category: HEAD
    is_married: false
    gst_credit_single_parent_household: false
    household_net_income: 15_000
  output:
    gst_credit_childless_boost: 101.62

- name: Same but as a single-parent household, so should get the full amount of 161
  period: 2023
  input:
    people:
      p1:
        gst_credit_category: HEAD
      c1:
        gst_credit_category: CHILD
    household:
      members: [p1, c1]
      is_married: false
      gst_credit_single_parent_household: TRUE
      household_net_income: 15_000
  output:
    gst_credit_childless_boost: 161
    gst_credit: (306 + 161) + 161
  
- name: Same as above but for a married household, so the boost doesn't apply
  period: 2023
  input:
    people:
      parent:
        gst_credit_category: HEAD
      c1:
        gst_credit_category: SPOUSE
      c2:
        gst_credit_category: CHILD
    household:
      members: [parent, c1, c2]
      is_married: true
      household_net_income: 15_000
  output:
    gst_credit_childless_boost: 0
    gst_credit: 306 + 306 + 161

- name: A household with less than $39,826 in net income should have a reduction of 0. 
  period: 2023
  input:
    people:
      parent:
        gst_credit_category: HEAD
      c1:
        gst_credit_category: SPOUSE
      c2:
        gst_credit_category: CHILD
    household:
      members: [parent, c1, c2]
      is_married: FALSE
      household_net_income: 30_000
  output:
    gst_credit_reduction: 0 

- name: Total credit. A household with $100,000 in net income should have a reduction of $3,008.70
  period: 2023
  input:
    people:
      parent:
        gst_credit_category: HEAD
      c1:
        gst_credit_category: SPOUSE
      c2:
        gst_credit_category: CHILD
    household:
      members: [parent, c1, c2]
      is_married: FALSE
      household_net_income: 100_000
  output:
    gst_credit_reduction: 3_008.70
    gst_credit: 0
